<!DOCTYPE html>
<html>

<head>
  <title>Front Page</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css"
    integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
</head>
<style>
  #body-container {
    width: 90%;
    max-width: 960px;
    margin: 10px auto;
    margin-top: 50px;
  }

  .container-transcript {
    width: 400px;
    height: 300px;
    background-color: blue;
    margin: 500px;
  }

  .container-recorder {
    width: 400px;
    height: 300px;
    background-color: red;

    position: absolute;
    top: 0;
    bottom: 0;
    left: 0;
    right: 0;

    margin: auto;
  }

  #btns {
    display: none;
  }
  }
</style>

<body>
  <nav class="navbar navbar-expand-lg navbar-light bg-light">
    <a id="logged-homepage-image" class="navbar-brand" href="/">
      <img src="https://avatars2.githubusercontent.com/u/47926996?s=200&v=4" width="30" height="30"
        class="d-inline-block align-top" alt="">
      Midas
    </a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup"
      aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
      <div class="navbar-nav">
        <a id="logged-homepage" class="nav-item nav-link active" href="/">Home <span
            class="sr-only">(current)</span></a>
        <a class="nav-item nav-link" href="{{NextValue}}">nextItem</a>
        <a class="nav-item nav-link" href="{{PreviousValue}}">previousItem</a>
        <a id="logged-username" class="nav-item nav-link" href="/">Logged in as: </a>
      </div>
    </div>
  </nav>

  <div id="body-container">
    <div class="jumbotron-sm">
      <h2>
        Sample Answer
      </h2>
    </div>
    <div class="jumbotron">
      {{ SampleAnswer }}
    </div>
    <h2>
      Recording Audio
    </h2>
    <div class="jumbotron" style="background-color: #f5f5f5;">
      <!-- <div class="jumbotron bg-white"> -->
      <button class="btn btn-primary" type="submit" id="gUMbtn">Open Audio Recorder</button>
      <div id="btns">
        <button class="btn btn-primary" type="submit" id="start">Start</button>
        <button class="btn btn-primary" type="submit" id="stop">Stop</button>
        <img id="recording-indicator" style="display: none" width="100" height="50"
          src="https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Fwww.apalon.com%2Fapps%2F69702f334634b0d836bdd5612ee63db9%2Fimages%2Fheader_desctop.gif&f=1&nofb=1">
      </div>
    </div>
    <h2>
      Recorded Samples
    </h2>
    <div class="jumbotron bg-white">
      <ul class="list-unstyled" id='ul'></ul>
    </div>
  </div>
</body>
<script>
  function setCookie(name, value, days) {
    var expires = "";
    if (days) {
      var date = new Date();
      date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));
      expires = "; expires=" + date.toUTCString();
    }
    document.cookie = name + "=" + (value || "") + expires + "; path=/";
  }
  function getCookie(name) {
    var nameEQ = name + "=";
    var ca = document.cookie.split(';');
    for (var i = 0; i < ca.length; i++) {
      var c = ca[i];
      while (c.charAt(0) == ' ') c = c.substring(1, c.length);
      if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length, c.length);
    }
    return null;
  }
  function eraseCookie(name) {
    document.cookie = name + '=; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;';
  }
  let id = val => document.getElementById(val);
  let usernameBtn = id('usernameBtn')

  // check if username is already saved
  username = getCookie("midas-username");
  loggedUsername = id('logged-username');
  loggedUsername.innerText = `Logged in as: ${username}`

  usernameBtn.onclick = e => {
    usernameInput = id('usernameInput')
    username = usernameInput.value
    console.log(username);
    // set the username in the cookie
    setCookie('midas-username', username, 1);
    // update the navbar
    loggedUsername = id('logged-username');
    loggedHomepageImage = id('logged-homepage-image');
    loggedHomepage = id('logged-homepage');
    loggedUsername.innerText = `Logged in as: ${username}`
    loggedHomepage.href = `/home/${username}`
    loggedHomepageImage.href = `/home/${username}`
  }
</script>
<script src="https://unpkg.com/axios/dist/axios.min.js"></script>
<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"
  integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js"
  integrity="sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx" crossorigin="anonymous"></script>
<script src="{{ url_for('static', filename='script.js') }}"></script>

</html>